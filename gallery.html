<!DOCTYPE html>
<html>

<head>
    <!--<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>-->


    <script src="JS/aframe-master.js"></script>
    <script
        src="https://unpkg.com/aframe-environment-component@1.3.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="JS/highlight.js"></script>
    <script src="JS/changemodel.js"></script>
    <title>3D/2D作品紀錄</title>
    <script type="text/javascript">
        function setCookie(cname, cvalue, exhour) {
            var d = new Date();
            d.setTime(d.getTime() + (exhour * 60 * 60 * 1000));
            var expires = "expires=" + d.toGMTString();
            document.cookie = cname + "=" + cvalue + "; " + expires;
        } function getCookie(cname) {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i].trim();
                if (c.indexOf(name) == 0)
                    return c.substring(name.length, c.length);
            }
            return "";
        }
        window.onload = function checkCookie() {
            var cookiename = getCookie("inlunajin_gallery");
            if (cookiename != "") {

            } else {
                cookiename = "come1hour";
                if (cookiename != "" && cookiename != null) {
                    const mobileDevice = ['Android', 'webOS', 'iPhone', 'iPad', 'iPod', 'BlackBerry', 'Windows Phone']
                    let isMobileDevice = mobileDevice.some(e => navigator.userAgent.match(e))
                    if (isMobileDevice) {
                        setTimeout(function () {
                            Swal.fire(
                                {
                                    icon: 'info',
                                    title: '歡迎來到美術館',
                                    html: '<b>本網頁包含大量模型<br>切換模型時讀取會花費較長時間<br>請耐心等待<br>或點擊下方按鈕進入Youtube撥放清單<br><br>如顯示錯誤請切換至良好網路環境並重新整理</b>',
                                    showDenyButton : true,
                                   denyButtonText: `Youtube`,
                                }
                            ) .then((result) => {
                                    if (result.isConfirmed) {
                                        
                                    } else {
                                        window.location.href = "https://www.youtube.com/watch?v=QKdk8Z7HM1g&list=PLKebdc9CwOuUNL1PFo2vF3wRb9lA0toMV&index=14";
                                    }
                                })
                        }, 1500);
                    }
                    else {

                        setTimeout(function () {
                            Swal.fire(
                                {
                                    icon: 'info',
                                    title: '歡迎來到美術館',
                                    html: '<b>本網頁包含大量模型<br>切換模型時讀取會花費較長時間<br>請耐心等待<br>或點擊下方按鈕進入Youtube撥放清單<br><br>如顯示錯誤請切換至良好網路環境並重新整理</b>',
                                    footer: '使用行動數據請注意流量',
                                   showDenyButton : true,
                                   denyButtonText: `Youtube`,
                                }
                            ) .then((result) => {
                                    if (result.isConfirmed) {
                                        
                                    } else {
                                        window.location.href = "https://www.youtube.com/watch?v=QKdk8Z7HM1g&list=PLKebdc9CwOuUNL1PFo2vF3wRb9lA0toMV&index=14";
                                    }
                                })
                        }, 500);

                    }
                    setCookie("inlunajin_gallery", cookiename, 1);
                }
            }
        }

    </script>

    <link href="popoutstyle.css" rel="stylesheet" type="text/css">
</head>

<body>
    <script type="text/javascript">
        AFRAME.registerComponent('unlit', {

            init: function () {

                function recursivelySetChildrenUnlit(mesh) {

                    if (mesh.material && mesh.material.map) {
                        mesh.material = new THREE.MeshBasicMaterial({ map: mesh.material.map });
                    }

                    if (mesh.children) {
                        for (var i = 0; i < mesh.children.length; i++) {
                            recursivelySetChildrenUnlit(mesh.children[i]);
                        }
                    }
                }

                this.el.addEventListener('model-loaded', (e) => {

                    const mesh = e.target.getObject3D('mesh');
                    for (var i = 0; i < mesh.children.length; i++) {
                        recursivelySetChildrenUnlit(mesh.children[i]);
                    }

                });
            }
        });</script>


    <a-scene background="color: #FFFFFF" cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .raycastable"
        info-message="htmlSrc: #messageText" vr-mode-ui="enabled: false">
        <a-gltf-model id="scenemodel" src="material/Gallery.glb" position="0 0 0" material="shader: flat">
        </a-gltf-model>
        <img id="tutorialposter" src="material/loading.png" crossorigin="anonymous" />
        <a-mixin id="tutorialframe" geometry="primitive: plane; width: 0.3; height: 0.3"
            material="transparent: true; shader: flat;opacity:0"></a-mixin>
        <a-mixin id="tutorialimage" geometry="primitive: plane; width: 0.3; height: 0.5"
            material="color: white; shader: flat;transparent: true" material="shader: flat" position="0 0 0.005">
        </a-mixin>

        <img id="youtubeposter" src="material/youtube.png" crossorigin="anonymous" />
        <a-mixin id="youtubeframe" geometry="primitive: plane; width: 0.2; height: 0.2"
            material="transparent: true; shader: flat;opacity:0"></a-mixin>
        <a-mixin id="youtubeimage" geometry="primitive: plane; width: 0.2; height: 0.2"
            material="color: white; shader: flat;transparent: true" material="shader: flat" position="0 0 0.005">
        </a-mixin>

        <a-entity light="type: ambient; color: #BBB"></a-entity>
        <a-entity light="type: point; intensity: 1; distance: 10; decay: 5" position="-0.5 3 -2"></a-entity>
        <a-entity light="type: point; intensity: 1; distance: 10; decay: 5" position="0.5 3 -2"></a-entity>
        <a-entity light="type: point; intensity: 1; distance: 10; decay: 5" position="0 1 -0.5"></a-entity>
        <a-gltf-model id="modelloc" src="material/gallery/monkey.gltf" position="0 0.15 -3" scale="1.2 1.2 1.2"
            material="shader:flat;side:back"
            animation="property: rotation; to: 0 360 0; loop: true; dur: 30000;easing: linear" visible='false'>
        </a-gltf-model>
        <a-gltf-model unlit id="imageloc" src="material/gallery/galleryinfo.glb" position="0 0.15 -3" rotation="0 -90 0"
            scale="1 1 1" material="shader:flat;side:back"></a-gltf-model>
        <a-assets>
            <img id="Exitimg" src="material/exitarrow.png" crossorigin="anonymous" />
            <img id="ahribut" src="material/gallery/button/ahri_but.jpg" crossorigin="anonymous" />
            <img id="cagebut" src="material/gallery/button/cage_but.jpg" crossorigin="anonymous" />
            <img id="cinemabut" src="material/gallery/button/cinema_but.jpg" crossorigin="anonymous" />
            <img id="fishbut" src="material/gallery/button/fish_but.jpg" crossorigin="anonymous" />
            <img id="hotelbut" src="material/gallery/button/hotel_but.jpg" crossorigin="anonymous" />
            <img id="howbut" src="material/gallery/button/how_but.jpg" crossorigin="anonymous" />
            <img id="jeannebut" src="material/gallery/button/jeanne_but.jpg" crossorigin="anonymous" />
            <img id="lightbut" src="material/gallery/button/light_but.jpg" crossorigin="anonymous" />
            <img id="lilithbut" src="material/gallery/button/lilith_but.jpg" crossorigin="anonymous" />
            <img id="live2dbut" src="material/gallery/button/live2d_but.jpg" crossorigin="anonymous" />
            <img id="nezukobut" src="material/gallery/button/nezuko_but.jpg" crossorigin="anonymous" />
            <img id="nftbut" src="material/gallery/button/nft_but.jpg" crossorigin="anonymous" />
            <img id="boatbut" src="material/gallery/button/boat_but.jpg" crossorigin="anonymous" />
            <img id="projectorbut" src="material/gallery/button/projector_but.jpg" crossorigin="anonymous" />
            <img id="ROVbut" src="material/gallery/button/ROV_but.jpg" crossorigin="anonymous" />
            <img id="searchlightbut" src="material/gallery/button/searchlight_but.jpg" crossorigin="anonymous" />
            <img id="tamamobut" src="material/gallery/button/tamamo_but.jpg" crossorigin="anonymous" />
            <img id="windowcagebut" src="material/gallery/button/windowcage_but.jpg" crossorigin="anonymous" />

            <img id="loading" src="material/sceneloading.jpg" crossorigin="anonymous" />
            <a-mixin id="loadingimg" geometry="primitive: plane; width: 4; height: 1"
            material="color: white; shader: flat" material="shader: flat" position="0 0 0"></a-mixin>

            <a-mixin id="Exitframe" geometry="primitive: plane; width: 1; height: 1"
                material="transparent: true; shader: flat;opacity:0"
                animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
                animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"></a-mixin>
            <a-mixin id="Exitposter" geometry="primitive: plane; width: 1; height: 1"
                material="color: white; shader: flat;transparent: true" material="shader: flat" position="0 0 0.005">
            </a-mixin>
            <a-mixin id="frame" geometry="primitive: plane; width: 4; height: 1.5"
                material="color: white; shader: flat">
            </a-mixin>
            <a-mixin id="poster" geometry="primitive: plane; width: 3.9; height: 1.4"
                material="color: white; shader: flat" material="shader: flat" position="0 0 0.005"></a-mixin>
            <img id="Description" src="material/gallery/des/base_des.jpg" crossorigin="anonymous" />
            <img id="P_ahri" src="material/gallery/des/ahri.jpg" crossorigin="anonymous" />
            <img id="P_hotel" src="material/gallery/des/hotel_des.jpg" crossorigin="anonymous" />
            <img id="P_cage" src="material/gallery/des/cage_des.jpg" crossorigin="anonymous" />
            <img id="P_cinema" src="material/gallery/des/cinema_des.jpg" crossorigin="anonymous" />
            <img id="P_fish" src="material/gallery/des/fish_des.jpg" crossorigin="anonymous" />
            <img id="P_hotel" src="material/gallery/des/hotel_des.jpg" crossorigin="anonymous" />
            <img id="P_how" src="material/gallery/des/how_des.jpg" crossorigin="anonymous" />
            <img id="P_jeanne" src="material/gallery/des/jeanne_des.jpg" crossorigin="anonymous" />
            <img id="P_light" src="material/gallery/des/light_des.jpg" crossorigin="anonymous" />
            <img id="P_lilith" src="material/gallery/des/lilith_des.jpg" crossorigin="anonymous" />
            <img id="P_live2d" src="material/gallery/des/live2d_des.jpg" crossorigin="anonymous" />
            <img id="P_nezuko" src="material/gallery/des/nezuko_des.jpg" crossorigin="anonymous" />
            <img id="P_nft" src="material/gallery/des/nft_des.jpg" crossorigin="anonymous" />
            <img id="P_boat" src="material/gallery/des/boat_des.jpg" crossorigin="anonymous" />
            <img id="P_projector" src="material/gallery/des/projector_des.jpg" crossorigin="anonymous" />
            <img id="P_ROV" src="material/gallery/des/ROV_des.jpg" crossorigin="anonymous" />
            <img id="P_searchlight" src="material/gallery/des/searchlight_des.jpg" crossorigin="anonymous" />
            <img id="P_tamamo" src="material/gallery/des/tamamo_des.jpg" crossorigin="anonymous" />
            <img id="P_windowcage" src="material/gallery/des/windowcage_des.jpg" crossorigin="anonymous" />

            <a-mixin id="manual" geometry="primitive: plane; width: 0.77; height: 1.4"
                material="color: white; shader: flat" material="shader: flat" position="0 0 0"></a-mixin>
        </a-assets>

        <a-text mixin="text" position="0 1 -2" wrap-count="10"></a-text>
        <a-entity id="background" position="0 0 0" geometry="primitive: sphere; radius: 2.0"
            material="color: red; side: back; shader: flat" scale="0.001 0.001 0.001" visible="false"
            class="raycastable">
        </a-entity>



        <a-entity position="0 1.6 0" camera
            look-controls="magicWindowTrackingEnabled: false; touchEnabled: true; mouseEnabled: true;reverse-mouse-drag:true">
            <a-entity id="fadeBackground" geometry="primitive: sphere; radius: 2.5"
                material="color: black; side: back; shader: flat; transparent: true; opacity: 0.6" visible="false">
            </a-entity>
            <a-entity material="src: #loading" mixin="loadingimg" position = "0 30 -50" scale = "7 7 7"></a-entity>
            <a-entity id="TutorialButton" position="0 2 -0.5" mixin="tutorialframe" class="raycastable menu-button"
                visible="false">
                <a-entity id="TurPoster" material="src: #tutorialposter" mixin="tutorialimage"></a-entity>
            </a-entity>

        </a-entity>
        <a-entity id="ExitButton" position="0 1 2" rotation="0 180 0" mixin="Exitframe" class="raycastable menu-button">
            <a-entity material="src: #Exitimg" mixin="Exitposter"></a-entity>
        </a-entity>

        <!-- Hand controls -->
        <a-entity id="leftHand" laser-controls="hand: left" raycaster="objects: .raycastable"></a-entity>
        <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: .raycastable" line="color: #118A7E">
        </a-entity>
        <a-entity id="ui" position="1.317 1.925 -1.89">
            <!-- Poster menu -->

            <a-entity id="menu" rotation="0 -30 0" highlight>


                <a-entity id="m_windowcage" position="0 0 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #windowcagebut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_cage" position="0 -0.15 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #cagebut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_ROV" position="0 -0.3 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #ROVbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_searchlight" position="0 -0.45 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #searchlightbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_light" position="0 -0.6 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #lightbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_projector" position="0 -0.75 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #projectorbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_boat" position="0.4 -0.6 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #boatbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_fish" position="0 -1.05 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #fishbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_how" position="0.4 -0.45 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #howbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_jeanne" position="0.4 0 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #jeannebut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_tamamo" position="0.4 -0.15 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #tamamobut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_lilith" position="0.4 -0.3 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #lilithbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_ahri" position="0 -0.9 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #ahribut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="m_nezuko" position="0 -1.2 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #nezukobut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="i_hotel" position="0.4 -0.75 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #hotelbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="i_cinema" position="0.4 -0.9 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #cinemabut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="i_nft" position="0.4 -1.05 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #nftbut" mixin="poster"></a-entity>
                </a-entity>
                <a-entity id="i_live2d" position="0.4 -1.2 0" mixin="frame" scale="0.1 0.1 0.1"
                    class="raycastable menu-button">
                    <a-entity material="src: #live2dbut" mixin="poster"></a-entity>
                </a-entity>

            </a-entity>

            <a-entity id="tolink" position="0 0 0.5" change-model visible="false" scale="0.001 0.001 0.001">

            </a-entity>
        </a-entity>
        <a-entity id="tell" material="src: #Description" mixin="manual" position="-1.50 1.3 -1.79" rotation="0 30 0">
            <a-entity id="YoutubeButton" position="0.245 -0.57 0.005" mixin="youtubeframe"
                class="raycastable menu-button" visible="true">
                <a-entity id="youPoster" material="src: #youtubeposter" mixin="youtubeimage"></a-entity>
            </a-entity>
        </a-entity>

        </a-entity>
    </a-scene>
</body>

</html>