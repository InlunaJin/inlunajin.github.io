<!DOCTYPE html>
<html>

<head>
  <!--<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>-->
  <script src="JS/aframe-master.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.3.0/dist/aframe-environment-component.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="JS/highlight.js"></script>
  <script src="JS/roomteleport.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <title>關於我</title>
  <script type="text/javascript">
    function setCookie(cname, cvalue, exhour) {
      var d = new Date();
      d.setTime(d.getTime() + (exhour * 60 * 60 * 1000));
      var expires = "expires=" + d.toGMTString();
      document.cookie = cname + "=" + cvalue + "; " + expires;
    } function getCookie(cname) {
      var name = cname + "=";
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i].trim();
        if (c.indexOf(name) == 0)
          return c.substring(name.length, c.length);
      }
      return "";
    }
    window.onload = function checkCookie() {
      var cookiename = getCookie("inlunajin_room");
      if (cookiename != "") {

      } else {
        cookiename = "come1hour";
        if (cookiename != "" && cookiename != null) {
          const mobileDevice = ['Android', 'webOS', 'iPhone', 'iPad', 'iPod', 'BlackBerry', 'Windows Phone']
          let isMobileDevice = mobileDevice.some(e => navigator.userAgent.match(e))
          if (isMobileDevice) {
            setTimeout(function () {
              Swal.fire(
                {
                  icon: 'info',
                  title: '歡迎來到我的房間',
                  html: '<b>本網頁以3D方式呈現<br>場景讀取會花費較長時間<br>請耐心等待<br><br>如顯示錯誤請切換至良好網路環境並重新整理</b>',
                  footer: '使用行動數據請注意流量'
                }
              )
            }, 1500);
          }
          else {

            setTimeout(function () {
              Swal.fire(
                {
                  icon: 'info',
                  title: '歡迎來到我的房間',
                  html: '<b>本網頁以3D方式呈現<br>場景讀取會花費較長時間<br>請耐心等待<br><br>如顯示錯誤請切換至良好網路環境並重新整理</b>',
                  footer: '使用行動數據請注意流量'
                }
              )
            }, 500);

          }
          setCookie("inlunajin_room", cookiename, 1);
        }
      }
    }

  </script>

  <link href="popoutstyle.css" rel="stylesheet" type="text/css">
</head>

<body>
  <a-scene background="color: #FFFFFF" cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .raycastable"
    info-message="htmlSrc: #messageText" vr-mode-ui="enabled: false">
    <a-gltf-model id="scenemodel" src="material/Room.glb" position="0 0 0" material="shader: flat"></a-gltf-model>

    <a-assets>
      <img id="exitposter" src="material/exitarrow.png" crossorigin="anonymous" />
      <img id="artposter" src="material/artarrow.png" crossorigin="anonymous" />
      <img id="movieposter" src="material/moviearrow.png" crossorigin="anonymous" />
      <a-mixin id="frame" geometry="primitive: plane; width: 1; height: 1"
        material="transparent: true; shader: flat;opacity:0"
        animation__scale="property: scale; to: 1 1 1; dur: 200; startEvents: mouseenter"
        animation__scale_reverse="property: scale; to: 0.8 0.8 0.8; dur: 200; startEvents: mouseleave"></a-mixin>
      <a-mixin id="tinyframe" geometry="primitive: plane; width: 1; height: 1"
        material="transparent: true; shader: flat;opacity:0"
        animation__scale="property: scale; to: 0.15 0.15 0.15; dur: 200; startEvents: mouseenter"
        animation__scale_reverse="property: scale; to: 0.1 0.1 0.1; dur: 200; startEvents: mouseleave"></a-mixin>
      <a-mixin id="poster" geometry="primitive: plane; width: 1; height: 1"
        material="color: black; shader: flat;transparent: true" material="shader: flat" position="0 0 0.005"></a-mixin>

        <img id="loading" src="material/sceneloading.jpg" crossorigin="anonymous" />
        <a-mixin id="loadingimg" geometry="primitive: plane; width: 4; height: 1"
        material="color: white; shader: flat" material="shader: flat" position="0 0 0"></a-mixin>

    </a-assets>
    <a-entity id="ExitButton" position="-2.5 1 -0.5" rotation="0 90 0" scale="0.8 0.8 0.8" mixin="frame"
      class="raycastable menu-button">
      <a-entity material="src: #exitposter" mixin="poster"></a-entity>
    </a-entity>
    <a-entity id="GalleryButton" position="-0.5 1 -0.45" rotation="0 60 0" scale="0.1 0.1 0.1" mixin="tinyframe"
      class="raycastable menu-button">
      <a-entity material="src: #artposter" mixin="poster"></a-entity>
    </a-entity>
    <a-entity id="TheaterButton" position="-0.45 1 -0.65" rotation="0 60 0" scale="0.1 0.1 0.1" mixin="tinyframe"
      class="raycastable menu-button">
      <a-entity material="src: #movieposter" mixin="poster"></a-entity>
    </a-entity>
    <a-entity material="src: #loading" mixin="loadingimg" position = "0 30 -50" scale = "7 7 7"></a-entity>
    <a-entity position="0 1.2 -0.3" camera
      look-controls="magicWindowTrackingEnabled: false; touchEnabled: true; mouseEnabled: true;reverse-mouse-drag:true" >
      <a-entity id="fadeBackground" geometry="primitive: sphere; radius: 2.5"
        material="color: black; side: back; shader: flat; transparent: true; opacity: 0.6" visible="false">
      </a-entity>

    </a-entity>
    <a-entity id="jstri" position="0 0 1" teleport visible="false" scale="1 1 1"
      geometry="primitive: plane; width: 0.3; height: 0.5"
      material="color: #333333; shader: flat; transparent: true;opacity:0.5" class="raycastable"></a-entity>
  </a-scene>
</body>

</html>