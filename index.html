<!DOCTYPE html>
<html>

<head>
  <!--<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>-->
  <script src="JS/aframe-master.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.3.0/dist/aframe-environment-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="JS/highlight.js"></script>
  <script src="JS/info-panel.js"></script>
  <title>林迺鈞的作品集</title>
  <script> function Popout() {
      Swal.fire(
        {
          icon: 'info',
          title: '歡迎進入林迺鈞的作品集',
          html: '<b>本網頁以3D方式呈現<br>場景讀取會花費較長時間<br>請耐心等待</b>',
          footer: '使用行動數據請注意流量'
        }

      )
    } </script>
  <link href="popoutstyle.css" rel="stylesheet" type="text/css">
</head>

<body>
  
  <a-scene background="color: #FFFFFF" cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .raycastable"
    info-message="htmlSrc: #messageText" vr-mode-ui="arEnabled: false">
    <a-gltf-model id="scenemodel" src="material/MAIN.glb" position="0 0 0" material="shader: flat"></a-gltf-model>
    <!-a-gltf-model id="boardmodel" src="material/Board.gltf" position="0 0 0" material="shader: flat">
      <-- /a-gltf-model>

        <a-assets>
          <img id="homeposter" src="material/homearrow.png" crossorigin="anonymous" />
          <img id="artposter" src="material/artarrow.png" crossorigin="anonymous" />
          <img id="movieposter" src="material/moviearrow.png" crossorigin="anonymous" />
          <img id="tutorialposter" src="material/tutorial.png" crossorigin="anonymous" />
          <a-mixin id="frame" geometry="primitive: plane; width: 1; height: 1"
            material="transparent: true; shader: flat;opacity:0"
            animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
            animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"></a-mixin>
          <a-mixin id="poster" geometry="primitive: plane; width: 1; height: 1"
            material="color: black; shader: flat;transparent: true" material="shader: flat" position="0 0 0.005">
          </a-mixin>

          <a-mixin id="tutorialframe" geometry="primitive: plane; width: 0.3; height: 0.5"
            material="transparent: true; shader: flat;opacity:0"></a-mixin>
          <a-mixin id="tutorialimage" geometry="primitive: plane; width: 0.3; height: 0.5"
            material="color: white; shader: flat;transparent: true" material="shader: flat" position="0 0 0.005">
          </a-mixin>
        </a-assets>

        <a-entity id="background" position="0 0 0" geometry="primitive: sphere; radius: 2.0"
          material="color: red; side: back; shader: flat" scale="0.001 0.001 0.001" visible="false" class="raycastable">
        </a-entity>

        <a-entity position="0 1.6 0" camera
          look-controls="magicWindowTrackingEnabled: false; touchEnabled: true; mouseEnabled: true">
          <a-entity id="fadeBackground" geometry="primitive: sphere; radius: 2.5"
            material="color: black; side: back; shader: flat; transparent: true; opacity: 0.6" visible="false">
          </a-entity>

        </a-entity>

        <!-- Hand controls -->
        <a-entity id="leftHand" laser-controls="hand: left" raycaster="objects: .raycastable"></a-entity>
        <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: .raycastable" line="color: #118A7E">
        </a-entity>
        <a-entity id="ui" position="0 1 -2">
          <!-- Poster menu -->

          <a-entity id="menu" highlight>

            <a-entity id="RoomButton" position="0 0 -0.5" mixin="frame" class="raycastable menu-button">
              <a-entity material="src: #homeposter" mixin="poster"></a-entity>
            </a-entity>
            <a-entity id="GalleryButton" position="-2 0 1.5" rotation="0 90 0" mixin="frame"
              class="raycastable menu-button">
              <a-entity material="src: #artposter" mixin="poster"></a-entity>
            </a-entity>
            <a-entity id="TheaterButton" position="2 0 1.5" rotation="0 -90 0" mixin="frame"
              class="raycastable menu-button">
              <a-entity material="src: #movieposter" mixin="poster"></a-entity>
            </a-entity>
          </a-entity>
          <a-camera position="0 0.5 2" wasd-controls-enabled="false" look-controls="magicWindowTrackingEnabled: false">"

            <a-entity id="TutorialButton" position="0 0 -0.5" mixin="tutorialframe" class="raycastable menu-button">
              <a-entity id="TurPoster" material="src: #tutorialposter" mixin="tutorialimage"></a-entity>
            </a-entity>
            <a-entity id="tutorial" position="0 0 1" to-link visible="false" scale="1 1 1"
              geometry="primitive: plane; width: 0.3; height: 0.5"
              material="color: #333333; shader: flat; transparent: true;opacity:0.5" class="raycastable">></a-entity>


        </a-entity>
        </a-camera>
  </a-scene>
  <script>
    var scene = document.getElementById('scenemodel');

    scene.addEventListener('object3dset', () => {

      const mesh = scene.getObject3D('mesh');
      mesh.children[0].material = new THREE.MeshBasicMaterial({ map: mesh.children[0].material.map });
    });
    var myboard = document.getElementById('boardmodel');

    myboard.addEventListener('object3dset', () => {

      const mesh = myboard.getObject3D('mesh');
      mesh.children[0].material = new THREE.MeshBasicMaterial({ map: mesh.children[0].material.map });
    });
  </script>
</body>

</html>